# 后端开源项目对比

| 功能                           | RuoYi                                                        | Guns                                              | RuoYi-Vue                                                    | eladmin                                                      | Pig                                                          | SpringBlade | cloud-platform | 备注                                                         |
| ------------------------------ | ------------------------------------------------------------ | ------------------------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ | ----------- | -------------- | ------------------------------------------------------------ |
| 架构风格                       | 单体                                                         | 单体                                              | 前后端分离                                                   | 前后端分离                                                   | 微服务                                                       | 微服务      | 微服务         |                                                              |
| Shiro 鉴权                     | Y                                                            |                                                   |                                                              |                                                              |                                                              |             |                | 使用@RequiresPermissions注解实现方法级别权限控制             |
| Security + JWT 鉴权            |                                                              | **自定义@Permission注解+AOP**实现方法级别权限控制 | **@PreAuthorize**实现方法级别权限控制                        |                                                              |                                                              |             |                | 登录时根据用户名、密码和验证码请求令牌，后续请求带上令牌，然后由 JwtAuthorizationTokenFilter (继承 OncePerRequestFilter ) 根据令牌解析后的数据找到相应的 User Details（保存在Redis中），最后构造 UsernamePasswordAuthenticationToken 并保存在 SecurityContextHolder.getContext() 上下文中 |
| Security + OAuth2              |                                                              |                                                   |                                                              |                                                              | 密码模式登录                                                 |             |                |                                                              |
| 日志管理（业务日志和登录日志） | Y                                                            | Y                                                 | Y                                                            |                                                              | Y                                                            |             |                | **日志获取**：通过注解和切面实现；**异步记录**：RuoYi通过Spring ThreadPoolTaskExecutor实现；Guns通过JDK ScheduledThreadPoolExecutor实现；Pig通过在切面中发送ApplicationEvent事件，再通过EventListener注解监听和Async注解异步处理<br />Guns在处理编辑操作的业务日志前，会将修改前的记录先保存到全局Bean中，修改后对比两者差异，从而在日志中体现具体修改了哪些数据 |
| 分页                           | PageHelper                                                   | MyBatisPlus                                       | PageHelper                                                   |                                                              | MyBatisPlus                                                  |             |                |                                                              |
| 多数据源                       | 自定义注解@DataSource+AOP                                    | 自定义注解@DataSource+AOP                         | 自定义注解@DataSource+AOP                                    |                                                              |                                                              |             |                | 在切面中将@DataSource标注的数据源名称保存到DataSourceHolder中，后续根据该名称找到相应的SqlSessionFactory去执行SQL |
| DataScope 数据范围             | Y                                                            | Y                                                 | Y                                                            |                                                              | Y                                                            |             |                | RuoYi通过注解和切面实现，Guns和Pig通过MyBatis拦截器实现(DataScope作为mapper的入参) |
| 验证码                         | 后端使用 [Kaptcha](https://github.com/penggle/kaptcha) 生成验证码并保存到 session 中，然后将验证码图片通过 IO 流返回，后续后端根据 session 中的值去校验用户输入的验证码是否正确 | 同左                                              | 后端生成验证码和 UUID 并保存到 Redis 中，然后将UUID 和 Base64 编码后的验证码图片返回给前端，前端在后续请求中带上 UUID 和用户输入的验证码，后端通过 UUID 去查询 Redis 校验是否正确 | 同左，但使用 [EasyCaptcha](https://gitee.com/whvse/EasyCaptcha) 生成验证码 | 同左，但是 UUID 是前端生成，验证码使用 [Kaptcha](https://github.com/penggle/kaptcha) 生成，验证码图片是通过 IO 流返回。另外，验证码生成是在网关中使用 WebFlux 完成，校验则使用自定义的 GatewayFilter 完成 |             |                |                                                              |
| 登录密码请求加密               | N                                                            | N                                                 | N                                                            |                                                              | Y                                                            |             |                | Pig通过AES对称加密，前端传入加密后的密码，后端解密，避免密码在登录时泄露 |
| 密码保存                       | Y                                                            | Y                                                 | Y                                                            |                                                              | Y                                                            |             |                | RuoYi和Guns是MD5带盐值加密保存，**Pig是使用SpringSecurity的BCryptPasswordEncoder加密保存** |
| XssFilter 过滤非法字符         | Y                                                            | Y                                                 | Y                                                            |                                                              | N                                                            |             |                | 通过Filter和正则表达式过滤                                   |
| Wrapper 封装返回结果           | N                                                            | Y                                                 | N                                                            |                                                              | N                                                            |             |                | 例如：将“1”和“2”这种魔术返回值封装成“男”和“女”。Guns只是简单地用Map封装返回值，个人不推荐用Map处理这种做法 |
| Excel报表                      | Y                                                            | Y                                                 | Y                                                            |                                                              | N                                                            |             |                | RuoYi在Apache POI基础上封装Excel注解、ExcelUtil实现；**Guns通过[EasyPOI](https://gitee.com/lemur/easypoi)实现** |
| 前后端代码生成                 | Y                                                            | Y                                                 | Y                                                            |                                                              |                                                              |             |                |                                                              |
| 定时任务                       | Y                                                            |                                                   |                                                              |                                                              |                                                              |             |                |                                                              |
| Swagger                        | Y                                                            |                                                   |                                                              |                                                              |                                                              |             |                |                                                              |
| 国际化                         | Y                                                            |                                                   |                                                              |                                                              |                                                              |             |                |                                                              |
|                                |                                                              |                                                   |                                                              |                                                              |                                                              |             |                |                                                              |

